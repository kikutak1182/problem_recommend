<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>AtCoder問題レコメンド</title>
</head>
<body>
    <h1>AtCoder問題レコメンド</h1>
    <form method="post">
        <input type="text" name="username" placeholder="AtCoderユーザー名" value="{{ username or '' }}" required><br>
        <textarea name="queries" placeholder="興味のあるアルゴリズムや単語・フレーズを1行ずつ入力" rows="5" style="width:300px;" required>{{ queries or '' }}</textarea><br>
        <button type="submit">レコメンド</button>
    </form>
    {% if error %}
        <p style="color:red;">{{ error }}</p>
    {% endif %}
    {% if result %}
        <h2>おすすめ問題 (ユーザー: {{ username }}, レート: {{ rate }})</h2>
        {% if top_tags %}
        <p><strong>関連度の高いタグ:</strong> {{ top_tags|join(', ') }}</p>
        {% endif %}
        <ul>
        {% for item in result %}
            <li>
                <a href="{{ item.url }}" target="_blank">{{ item.title }}</a>
                (diff: {{ item.diff }}, 関連度: {{ item.relevance_score }}) 
                <br><span style="color: #666;">[マッチしたタグ: {{ item.tags|join(', ') }}]</span>
            </li>
        {% endfor %}
        </ul>
    {% endif %}
</body>
</html> 